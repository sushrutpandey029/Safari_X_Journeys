{{> adminheader admin=admin}}
{{> adminsidebar}}

<main id="main" class="main">
    <div class="pagetitle">
        <h1>Cab Assignments</h1>
    </div>
    <section class="section">
        <div class="row">
            <div class="col-lg-12">
                {{#if error}}
                <div class="alert alert-danger">{{error}}</div>
                {{/if}}
                <table id="cabAssignmentTable" class="display table table-striped">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Cab ID</th>
                            <th>Guide Name</th>
                            <th>Guide Email</th>
                            <th>Guide Phone</th>
                            <th>Driver Name</th>
                            <th>Driver Email</th>
                            <th>Driver Phone</th>
                            <th>Assignment Type</th>
                            <th>Start Date</th>
                            <th>Delete</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each assignments}}
                        <tr>
                            <td>{{@index}}</td>
                            <td>{{this.cabId}}</td>
                            <td>{{this.assignedGuide.guidename}}</td>
                            <td>{{this.assignedGuide.email}}</td>
                            <td>{{this.assignedGuide.phonenumber}}</td>
                            <td>
                                {{#if this.assignedDriver}}
                                {{this.assignedDriver.name}}
                                {{else}}
                                N/A
                                {{/if}}
                            </td>
                            <td>
                                {{#if this.assignedDriver}}
                                {{this.assignedDriver.email}}
                                {{else}}
                                N/A
                                {{/if}}
                            </td>
                            <td>
                                {{#if this.assignedDriver}}
                                {{this.assignedDriver.phone}}
                                {{else}}
                                N/A
                                {{/if}}
                            </td>
                            <td>{{this.assignmentType}}</td>
                            <td>{{this.startDate}}</td>
                            <td>
                                <form method="POST" action="/cab/assignment/delete/{{this.assignmentId}}?_method=DELETE" onsubmit="return confirm('Are you sure you want to delete this assignment?');">
                                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                </form></td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>
    </section>
</main>

{{> adminfooter}}